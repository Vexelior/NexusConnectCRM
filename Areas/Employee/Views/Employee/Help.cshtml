@model NexusConnectCRM.Areas.Employee.ViewModels.ListHelpViewModel
@inject NexusConnectCRM.Data.ApplicationDbContext _context
@{
    ViewBag.Title = "Help Tasks";
    Layout = "~/Views/Shared/_EmployeePortalLayout.cshtml";
}

<div class="container">
    <div class="row">
        <h1 class="text-center">Help Tasks</h1>
        <div class="col-md-6" style="margin: 0 auto;">
            @foreach (var help in Model.HelpList)
            {
                var fullName = _context.Users.Where(u => u.Id == help.Author).Select(u => u.FirstName + " " + u.LastName).FirstOrDefault();

                <div class="card mt-4">
                    <div class="card-body">
                        <h5 class="card-title">@help.Title</h5>
                        <p class="mt-3">User: @fullName</p>
                        <p>Submitted: @help.CreatedDate</p>
                        <a href="@Url.Action("HelpEdit", "Employee", new { id = help.Id })" class="btn btn-primary">View</a>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
